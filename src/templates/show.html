{% extends "base.html" %}
{% load static %}
  {% block content %}
    <body>
      {% block scripts %}
            <script src="{% static 'js/jquery-2.0.1.js' %}"></script>
            <script src="{% static 'js/bootstrap4.3.1.min.js' %}"></script>
        {% endblock %}
            {% if messages %}
                <ul class="messages">
                    <div class="row" role='alert'>
                        <div class="col-sm-11 col-sm-offset-3" role='alert'>
                            {% for message in messages %}
                                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span>
  </button></li>
                            {% endfor %}
                        </ul>
                    {% endif %}
     {% block css %}
            <link href="{% static 'css/icon.css' %}" rel="stylesheet">
        {% endblock css %}
         <!-- Begin Page Content -->
      <div class="container-fluid">
        <!-- Page Heading -->
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
          <h1 class="h3 mb-0 text-gray-800">Area Personale</h1>
          <a href="{% url 'export_contratti_csv' %}"  class="d-none d-sm-inline-block btn btn-sm btn-success shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Scarica Report</a>
        </div>
        <!-- Content Row -->
        <div class="row">
          <!-- Earnings (Monthly) Card Example -->
          <div class="col-xl-3 col-md-7 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Mese ({% now "F Y" %})</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{ svinlavorazione }}</div>
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">In Lavorazione</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-sync fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Earnings (Monthly) Card Example -->
          <div class="col-xl-3 col-md-7 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Mese ({% now "F Y" %})</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{ svqcok }}</div>
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Check Call Ok</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-check fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Pending Requests Card Example -->
          <div class="col-xl-3 col-md-7 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Mese ({% now "F Y" %})</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{ svqcko }}</div>
                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Check Call Ko</div>
                  </div>
                  <div class="col-auto">
                    <i class="fas fa-thumbs-down fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Earnings (Monthly) Card Example -->
          <div class="col-xl-3 col-md-7 mb-4">
            <div class="card border-left-danger shadow h-100 py-2">
              <div class="card-body">
                <div class="row no-gutters align-items-center">
                  <div class="col mr-2">
                    <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Mese ({% now "F Y" %})</div>
                    <div class="row no-gutters align-items-center">
                      <div class="col-auto">
                        <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{ svmoroso }}</div>
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Moroso</div>
                      </div>
                      <div class="col">
                        <div class="progress progress-sm mr-2">
                          <div class="progress-bar" role="progressbar" style="width: {{ svmoroso }}%;">{{ svmoroso }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-auto">
                    <i class="far fa-times-circle fa-2x text-gray-300"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <form method="GET" action="cerca">
        <div class="form-row">
    <div class="form-group col-md-4">
      <input type="text" class="form-control" name="ecodicefiscale" placeholder="Cerca Per Codice Fiscale">
    </div>
    <div class="form-group col-md-4">
      <input type="text" class="form-control" name="epod" placeholder="Cerca Per Codice Pod">
    </div>
    <div class="form-group col-md-4">
      <input type="text" class="form-control" name="epdr" placeholder="Cerca Per Codice Pdr">
    </div>
  </div>
  <div class="form-row">
      <div class="form-group col-md-4">
      <input type="text" class="form-control" name="eoperatore" placeholder="Cerca Per Operatore">
    </div>
    <div class="form-group col-md-4">
      <input type="text" class="form-control" name="enome" placeholder="Cerca Per Nome Cliente">
    </div>
    <div class="form-group col-md-4">
      <input type="text" class="form-control" name="ecognome" placeholder="Cerca Per Cognome Cliente">
    </div>
  </div>
    <div class="form-row">
    <div class="form-group mx-sm-3 mb-2">
      <div class="col-15">
     <label for="dataDateMin">Dal</label>
    <input type="date" class="form-control" id="dataDateMin" name="date_min">
    <i class="fas fa-calendar-alt"></i>
  </div>
  </div>
  <div class="form-group mx-sm-3 mb-2">
     <div class="col-15">
    <label for="dataDateMax">Al</label>
    <input type="date" class="form-control" id="dataDateMax" name="date_max">
    <i class="fas fa-calendar-alt"></i>
  </div>
  </div>  
  <div class="form-inline" style="position: absolute;left: 80%;top: 440px;"> 
          <button class="btn btn-success mr-2"><span style="position: relative;top: 7px;right: 4px;" class="fas fa-search"></span>Cerca</button>
          <a class="btn btn-secondary mr-2" href="{% url 'show' %}" role="button"><span style="position: relative;top: 6px;right: 4px;" class="fas fa-sync-alt" ></span>Reset</a> 
      </div>
    </div> 
    </form>
    <br/>
    <table style="box-shadow: 0 .15rem 1.75rem 0 rgba(58,59,69,.15) !important; border-radius: 0px 0px 25px 25px;" class="table table-striped table-sm">
      <thead class="thead">
        <tr>
          <th>Data Inserimento</th>
          <th>Numero Cliente</th>
          <th style="display:none;">Operatore</th>
          <th>Nome Cognome</th>
          <th>Codice Fiscale</th>
          <th style="display:none;">Pod</th>
          <th style="display:none;">Pdr</th>
          <th style="display:none;">Cellulare</th>
          <th>Stato</th>
          <th>rec</th>
          <th>Contratto</th>
          
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for contratti in contratta %}
          <tr>
            <td>{{ contratti.edata| date:"d F Y" }}  </td>
            <td>{{ contratti.numerocliente }}  </td>
            <td style="display:none;">{{ contratti.eoperatore }}</td>
            <td>{{ contratti.enome }} {{ contratti.ecognome }}</td>
            <td>{{ contratti.ecodicefiscale }}</td>
            <td style="display:none;">{{ contratti.epod }}</td>
            <td style="display:none;">{{ contratti.epdr }}</td>
            <td style="display:none;">{{ contratti.ecellulare }}</td>
            <td>{{ contratti.esito }}</td>
            <td><a href="/media/{{ contratti.ecarica }}" class="btn btn-info btn-sm" target="_blank"> 
            Ascolta
  </a>
        </td>
            <td>{{ contratti.econtratto }}</td>
            <td>
              <a href="/vedi/{{ contratti.id }}" class="btn btn-secondary btn-circle" style="margin:1px; width: 30px;
                height: 30px;
                text-align: center;
                padding: 6px 0;
                font-size: 12px;
                line-height: 1.428571429;
                border-radius: 15px;"><i class="fas fa-eye"></i>
                <br>
                <a href="/edit/{{ contratti.id }}" class="btn btn-warning btn-circle" style="margin:1px; width: 30px;
                  height: 30px;
                  text-align: center;
                  padding: 6px 0;
                  font-size: 12px;
                  line-height: 1.428571429;
                  border-radius: 15px;"><i class="fas fa-user-edit"></i>
                  <br>
                  <a href="/delete/{{ contratti.id }}" class="btn btn-danger btn-circle" style="width: 30px;
                    height: 30px;
                    text-align: center;
                    padding: 6px 0;
                    font-size: 12px;
                    line-height: 1.428571429;
                    border-radius: 15px;"><i class="fas fa-trash-alt"></i>
                  </td>
                  {% empty %}
                              <div class="alert alert-secondary" role="alert">
  <li>Ops... non ci sono Contratti nella tabella.</li> 
</div>  
                </tr>
              {% endfor %}
            </tbody>
          </table>
          {% if contratta.has_other_pages %}
            <ul class="pagination">
              <li class="page-item disabled">
                {% if contratta.has_previous %}
                  <li  class="page-item"><a class="page-link" href="?page={{ contratta.previous_page_number }}">Previous</a></li>
                {% else %}
                  <li class="page-item disabled">
                    <li class="page-link"><span>Previous</span></li>
                  {% endif %}
                  {% for i in contratta.paginator.page_range %}
                    {% if contratta.number == i %}
                      <li class="page-item active">
                        <a  class="page-link"><span>{{ i }} <span class="sr-only">(current)</span></a></span></li>
                      {% else %}
                        <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                      {% endif %}
                    {% endfor %}
                    {% if contratta.has_next %}
                      <li class="page-item" ><a class="page-link" href="?page={{ contratta.next_page_number }}">Next</a></li>
                    {% else %}
                      <li class="page-item disabled"><a class="page-link"><span>Next</span></a></li>
                    {% endif %}
                  </ul>
                {% endif %}
                <br>
                <br> 
              </body>
            {% endblock %}
          </html>
